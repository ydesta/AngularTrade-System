<app-breadcrumb [title]="'registerTrade.editor.TradeFinancialReport' | translate"></app-breadcrumb>
<div fxLayout="row" class="p-5">
  <mat-card fxFlex="100" class="">
    <mat-card-header fxLayout="row">
      <div fxFlex="40">
        <mat-card-title> {{'registerTrade.editor.TradeFinancialReport' | translate}} </mat-card-title>
      </div>
      <div fxFlex fxLayoutAlign="end">
      </div>
    </mat-card-header>
    <div class="responsive-table" style="margin: 15px">
      <mat-accordion>
        <mat-expansion-panel>
          <span *ngIf="count != 0">
          <mat-expansion-panel-header>
            <mat-panel-title style="margin-top: 11px">
            <span matBadge="{{count}}" matBadgeOverlap="false"
                  matBadgeColor="accent">{{'registerTrade.editor.MemberTradeExcutionReport' | translate}}</span>
            </mat-panel-title>
          </mat-expansion-panel-header>
            </span>
          <mat-nav-list class="mat-list">
            <mat-list-item *ngFor="let shoe of organizationList;" value="shoe.Id"
                           (click)="getListOfReportedMembers(shoe.Id)">
              <span matLine> {{shoe.Description}} </span>
            </mat-list-item>
          </mat-nav-list>
        </mat-expansion-panel>
      </mat-accordion>
    </div>

    <mat-accordion>
      <mat-expansion-panel [expanded]="true">
        <mat-table multitemplatedatarows role="grid" [dataSource]="dataSource" matSort matSortStart="desc">
          <ng-container matColumnDef="sn">
            <mat-header-cell *matHeaderCellDef>{{'registerTrade.editor.Sno' | translate}}</mat-header-cell>
            <mat-cell mat-cell *matCellDef="let element; let i = index;">
              {{i + 1}}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="CustomerFullName">
            <mat-header-cell *matHeaderCellDef
                             mat-sort-header>{{'registerTrade.editor.CustomerFullName' | translate}}</mat-header-cell>
            <mat-cell *matCellDef="let caseList">
              {{caseList.CustomerFullName}}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="OrganizationName">
            <mat-header-cell *matHeaderCellDef
                             mat-sort-header>{{'registerTrade.editor.OrganizationName' | translate}}</mat-header-cell>
            <mat-cell *matCellDef="let caseList">
              {{caseList.OrganizationName}}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="CustomerType">
            <mat-header-cell *matHeaderCellDef
                             mat-sort-header>{{'registerTrade.editor.CustomerType' | translate}}</mat-header-cell>
            <mat-cell *matCellDef="let caseList">
              {{caseList.CustomerType}}
            </mat-cell>
          </ng-container>
          <ng-container matColumnDef="RegularPhone">
            <mat-header-cell *matHeaderCellDef
                             mat-sort-header>{{'registerTrade.editor.RegularPhone' | translate}}</mat-header-cell>
            <mat-cell *matCellDef="let caseList">
              {{caseList.RegularPhone}}
            </mat-cell>
          </ng-container>
          <ng-container matColumnDef="MobilePhone">
            <mat-header-cell *matHeaderCellDef
                             mat-sort-header>{{'registerTrade.editor.MobilePhone' | translate}}</mat-header-cell>
            <mat-cell *matCellDef="let caseList">
              {{caseList.MobilePhone}}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="DateReport">
            <mat-header-cell *matHeaderCellDef
                             mat-sort-header>{{'registerTrade.editor.ReportDate' | translate}} </mat-header-cell>
            <mat-cell *matCellDef="let caseList">
              {{caseList.DateReport}}
            </mat-cell>
          </ng-container>

          <ng-container matColumnDef="ReportTypeName">

            <mat-header-cell *matHeaderCellDef
                             mat-sort-header>{{'registerTrade.editor.ReportType' | translate}}</mat-header-cell>
            <mat-cell *matCellDef="let caseList">
              {{caseList.ReportTypeName}}
            </mat-cell>
          </ng-container>


          <ng-container matColumnDef="loading">
            <mat-footer-cell *matFooterCellDef colspan="10">
              {{'registerTrade.editor.LoadingData' | translate}}
            </mat-footer-cell>
          </ng-container>


          <ng-container matColumnDef="noData">
            <mat-footer-cell *matFooterCellDef colspan="10">
              {{'registerTrade.editor.NoData' | translate}}
            </mat-footer-cell>
          </ng-container>


          <ng-container matColumnDef="Action">
            <mat-header-cell *matHeaderCellDef></mat-header-cell>
            <mat-header-cell *matHeaderCellDef></mat-header-cell>
            <mat-cell mat-dialog-actions *matCellDef="let caseList">
              <button mat-icon-button matTooltip="View" (click)="editRegisterTrade(caseList)">
                <mat-icon color="primary">view_list</mat-icon>
              </button>

              <button mat-icon-button matTooltip="Send" (click)="sendMemberTradeExcution(caseList)"
                      *ngIf="caseList.TradeExcutionStatusTypeId==2">
                <mat-icon color="warn">send</mat-icon>
              </button>

            </mat-cell>
          </ng-container>

          <mat-header-row *matHeaderRowDef="displayedColumns" role="row" class="mat-header-row">
          </mat-header-row>
          <mat-row *matRowDef="let row; columns: displayedColumns" class="element-row"></mat-row>

          <mat-footer-row *matFooterRowDef="['loading']" [ngClass]="{'hide': dataSource !=null}"></mat-footer-row>
          <mat-footer-row *matFooterRowDef="['noData']"
                          [ngClass]="{'hide': !(dataSource != null && dataSource.data.length==0)}"></mat-footer-row>

        </mat-table>
        <mat-paginator [pageSizeOptions]="[5,10, 25, 50]" showFirstLastButtons></mat-paginator>


      </mat-expansion-panel>
    </mat-accordion>


  </mat-card>
</div>
